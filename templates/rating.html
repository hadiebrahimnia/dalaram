<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title }}</title>
    {% load static %}
    <link
      href="{% static 'plugins/bootstrap/css/bootstrap.rtl.min.css' %}"
      rel="stylesheet" />
    <link
      href="{% static 'css/rating.css' %}"
      rel="stylesheet" />
  </head>
  <body>
    <div id="rotate-device">
      <i>↻</i>
      <h3>لطفاً گوشی خود را بچرخانید</h3>
      <p>برای تجربه بهتر، صفحه را به حالت افقی (landscape) درآورید.</p>
    </div>
    <div class="content">
      <div
        id="feedback-message"
        class="hidden"
        style="
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: rgba(255, 70, 70, 0.95);
          color: white;
          padding: 30px 50px;
          border-radius: 20px;
          font-size: 28px;
          font-weight: bold;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
          z-index: 9999;
          text-align: center;
          backdrop-filter: blur(10px);
          opacity: 0;
          transition: opacity 0.4s ease;
        ">
        لطفاً سریع‌تر پاسخ دهید!
      </div>
      <div id="fixation" class="full-center hidden">
        <div class="fixation">+</div>
      </div>
      <audio id="audio-player" preload="auto"></audio>
      <!-- صفحه خوشایندی -->
      <div id="valence-rating" class="py-5 hidden">
        <div class="card">
          <div class="card-body text-center sam-container">
            <h3 class="mb-4">لطفاً میزان خوشایندی صدا را انتخاب کنید</h3>
            <div class="sam-buttons">
              {% for i in "123456789" %}
              <button
                type="button"
                class="sam-btn"
                data-value="{{ forloop.counter }}">
                <img
                  src="{% static 'images/valence/' %}{{ forloop.counter }}.png"
                  alt="خوشایندی {{ forloop.counter }}" />
                <div class="key-hint">{{ forloop.counter }}</div>
              </button>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
      <!-- صفحه برانگیختگی -->
      <div id="arousal-rating" class="py-5 hidden">
        <div class="card">
          <div class="card-body text-center sam-container">
            <h3 class="mb-4">لطفاً میزان برانگیختگی صدا را انتخاب کنید</h3>
            <div class="sam-buttons">
              {% for i in "123456789" %}
              <button
                type="button"
                class="sam-btn col-3"
                data-value="{{ forloop.counter }}">
                <img
                  src="{% static 'images/arousal/' %}{{ forloop.counter }}.jpg"
                  alt="برانگیختگی {{ forloop.counter }}" />
                <div class="key-hint">{{ forloop.counter }}</div>
              </button>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
      <!-- صفحه شروع -->
      <div id="practice-note" class="p-5 m-auto">
        <div class="card">
          <div class="card-body text-center">
            <p class="lead mt-3"> در این آزمون تعدادی صدا برای شما پخش میشود</p>
            <p class="lead mt-3">بعد از پایان هر صدا شما اولا میزان خوشایندی (اینکه صدا چقدر صدای این صدا برای شما حس خوب یا بد ایجاد کرده است را تعیین میکنید و ( و سپسس میزان برانگیختگی( اینکه میزان حس ایجاد شده چه میزان هست را تعیین میکنید</p>
            <button class="btn btn-success btn-lg mt-4" id="start-practice">
              شروع آزمون
            </button>
          </div>
        </div>
      </div>
      <div id="main-note" class="p-5 m-auto hidden">
        <div class="card">
            <div class="card-body text-center">
            <h3 class="mb-4">مرحله آزمایشی به پایان رسید</h3>
            <p class="lead mt-3">
                اکنون آزمون اصلی آغاز می‌شود. در این بخش دیگر زمان محدود نیست و پیام «سریع‌تر پاسخ دهید» نمایش داده نمی‌شود.
            </p>
            <p class="lead">
                لطفاً برای هر صدا همانند قبل، ابتدا میزان <strong>خوشایندی</strong> و سپس میزان <strong>برانگیختگی</strong> را انتخاب کنید.
            </p>
            <p class="lead text-danger">
                توجه: این بخش نتایج واقعی شماست، بنابراین با دقت و تمرکز پاسخ دهید.
            </p>
            <button class="btn btn-primary btn-lg mt-4" id="start-main">
                شروع آزمون اصلی
            </button>
            </div>
        </div>
        </div>
      <!-- صفحه پایان -->
      <div id="thanks" class="py-5 hidden">
        <div class="card m-auto">
          <div class="card-body text-center">
            <h2>متشکریم!</h2>
            <p class="lead">آزمون با موفقیت به پایان رسید.</p>
          </div>
        </div>
      </div>
      <script>
            const practiceFiles = {{ practice_files|safe }};
            const mainFiles = {{ main_files|safe }};
      </script>
      <script src="{% static 'js/jquery.min.js' %}"></script>
      <script src="{% static 'js/rating.js' %}"></script>
    </div>
  </body>
</html>